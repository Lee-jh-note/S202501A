<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.oracle.s202501a.mapper.empMapper">
	<select id="shEmpSelect" resultType="Emp">
		select * from emp
	</select>
	
<!-- 직원 직급 선택 (등록 시)-->
   <select id="nySelectPos" resultType="emp">   
 <![CDATA[
    SELECT DISTINCT position
    FROM emp
    WHERE position IS NOT NULL
    ORDER BY 
      CASE 
        WHEN position = '관리자' THEN 1
        WHEN position = '부장' THEN 2
        WHEN position = '대리' THEN 3 
        WHEN position = '사원' THEN 4
        ELSE 5  -- 기타 직급은 마지막에 정렬
      END
  ]]>
</select>
   <insert id="nyinsertEmp" parameterType="Emp"> <!-- emp 테이블의 순서데로 집어넣어야한다. -->
      INSERT INTO EMP (
      emp_No,
      dept_No,       <!-- 부서 번호 -->
      emp_Name,      <!-- 이름 -->
      emp_Tel,       <!-- 전화번호 -->
      emp_Email,     <!-- 이메일 -->
      password,      <!-- 비밀번호 -->
      birth,         <!-- 생년월일 -->
      hiredate,      <!-- 입사일 -->
      roles,     <!-- 사용자 권한 -->
      position,      <!-- 직급 -->
      username,            <!-- 아이디 -->
      emp_Delete     <!-- 삭제 여부 -->
      ) VALUES (
      EMP_NO_SEQ.nextval,
      #{dept_No},          <!-- 부서 번호 -->
      #{emp_Name},         <!-- 이름 -->
      #{emp_Tel},          <!-- 전화번호 -->
      #{emp_Email},        <!-- 이메일 -->
      #{password},          <!-- # 비밀번호 (0으로 고정) -->
      #{birth},    <!-- 생년월일 -->
      #{hiredate}, <!-- 입사일 -->
      0,                   <!-- # 사용자 권한 (0로 고정) -->
      #{position},         <!-- 직급 -->
      EMP_NO_SEQ.currval,  <!-- # 아이디 (0으로 고정) -->
      0                    <!-- # 삭제 여부 (0으로 고정) -->
      )
   </insert>

</mapper>